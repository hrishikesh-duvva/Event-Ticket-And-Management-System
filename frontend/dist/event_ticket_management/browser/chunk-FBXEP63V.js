import{a as $}from"./chunk-G5KA7DMQ.js";import{h as j}from"./chunk-LKO6ZGM4.js";import{Ka as p,N as O,Na as d,Qa as i,Ra as r,S as E,Sa as I,Vb as w,Wb as T,X as M,Xa as y,Ya as k,Zb as F,ec as z,fb as a,fc as N,gb as c,ib as g,j as x,n as C,nb as S,sb as v,tb as f,ua as P,ya as o,za as m}from"./chunk-A5IQK4TJ.js";import{a as _,b}from"./chunk-JHI3MBHO.js";var l=class t{constructor(n){this.http=n}getCustomerIdFromToken(){let n=localStorage.getItem("token");if(n)try{return+$(n).UserId}catch(e){throw console.error("Invalid token:",e),new Error("Failed to decode token")}throw new Error("User not authenticated: Token not found")}getEventsByUserId(){let n=this.getCustomerIdFromToken();if(n!==-1){let e=`http://localhost:5095/api/events/user/${n}`,s=localStorage.getItem("token"),u=new z().set("Authorization",`Bearer ${s}`);return this.http.get(e,{headers:u}).pipe(C(D=>D.$values.map(h=>b(_({},h),{schedules:h.schedules?.$values||[]}))))}return x([])}static \u0275fac=function(e){return new(e||t)(E(N))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};function R(t,n){t&1&&(i(0,"div",5),a(1,"Loading..."),r())}function A(t,n){t&1&&(i(0,"div"),a(1,"No events found."),r())}function Y(t,n){if(t&1&&(i(0,"li")(1,"strong"),a(2),r(),a(3),v(4,"date"),v(5,"date"),i(6,"p"),a(7),r()()),t&2){let e=n.$implicit;o(2),c(e.sessionName),o(),g(" - ",f(4,5,e.startTime,"short")," to ",f(5,8,e.endTime,"short")," "),o(4),g("",e.speakerName," - ",e.description,"")}}function L(t,n){if(t&1&&(i(0,"div",8),I(1,"img",9),i(2,"h2"),a(3),r(),i(4,"p"),a(5),r(),i(6,"p"),a(7),r(),i(8,"ul"),p(9,Y,8,11,"li",10),r()()),t&2){let e=n.$implicit;o(),d("src",e.eventImage,P),o(2),c(e.name),o(2),c(e.location),o(2),c(e.description),o(2),d("ngForOf",e.schedules)}}function q(t,n){if(t&1&&(i(0,"div",6),p(1,L,10,5,"div",7),r()),t&2){let e=k();o(),d("ngForOf",e.events)}}var B=class t{constructor(n,e){this.router=n;this.eventorganiserService=e}events=[];loading=!0;ngOnInit(){this.eventorganiserService.getEventsByUserId().subscribe(n=>{this.events=n,this.loading=!1})}navigateToPostEvent(){this.router.navigate(["/event-organiser/post-event"])}static \u0275fac=function(e){return new(e||t)(m(j),m(l))};static \u0275cmp=M({type:t,selectors:[["app-edashboard"]],standalone:!0,features:[S],decls:8,vars:3,consts:[[1,"dashboard"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],["class","event-list",4,"ngIf"],[1,"post-event-button",3,"click"],[1,"loading-spinner"],[1,"event-list"],["class","event-card",4,"ngFor","ngForOf"],[1,"event-card"],["alt","Event Image",3,"src"],[4,"ngFor","ngForOf"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"h1"),a(2,"Your Events"),r(),p(3,R,2,0,"div",1)(4,A,2,0,"div",2)(5,q,2,1,"div",3),i(6,"button",4),y("click",function(){return s.navigateToPostEvent()}),a(7," Post New Event "),r()()),e&2&&(o(3),d("ngIf",s.loading),o(),d("ngIf",!s.loading&&s.events.length===0),o(),d("ngIf",!s.loading&&s.events.length>0))},dependencies:[F,w,T],styles:[".dashboard[_ngcontent-%COMP%]{padding:20px;font-family:Arial,sans-serif}h1[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;margin-bottom:20px;color:#333;text-align:center;letter-spacing:1px}.loading-spinner[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center;margin-top:20px}.event-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px;margin-top:20px}.event-card[_ngcontent-%COMP%]{background:#fff;padding:20px;border:1px solid #ddd;border-radius:10px;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease,box-shadow .3s ease}.event-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 6px 12px #0003}.event-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:8px;margin-bottom:15px}.event-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;color:#007bff;margin-bottom:10px;font-weight:700;text-transform:capitalize;letter-spacing:.5px}.event-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#555;font-size:1rem;line-height:1.5;margin-bottom:15px}.event-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-of-type{font-weight:600;color:#333;font-size:1.1rem}.event-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0;list-style:none}.event-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.9rem;color:#333;margin-bottom:12px}.event-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600;color:#007bff}.event-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem;color:#777;margin-top:5px;font-style:italic}.post-event-button[_ngcontent-%COMP%]{display:block;margin:30px auto;padding:12px 25px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:1.1rem;font-weight:700;text-transform:uppercase;cursor:pointer;transition:background-color .3s,transform .2s}.post-event-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.post-event-button[_ngcontent-%COMP%]:active{transform:scale(.98)}"]})};export{B as EdashboardComponent};
