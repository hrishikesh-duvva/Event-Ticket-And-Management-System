import{a as D}from"./chunk-Z27GNLBQ.js";import{b as E,e as O,f as V,g as T,h as k,i as q,p as A,q as F,r as W,s as z}from"./chunk-C7UFNYZC.js";import{f as L,h as N,l as R}from"./chunk-LKO6ZGM4.js";import{K as C,Ka as c,Na as l,Qa as o,Ra as t,Wa as M,Wb as y,X as P,Xa as x,Ya as h,_b as I,da as g,ea as f,eb as m,fb as d,jb as _,kb as v,lb as w,nb as S,ya as a,za as b}from"./chunk-A5IQK4TJ.js";import"./chunk-JHI3MBHO.js";function B(n,r){n&1&&(o(0,"span"),d(1,"Phone number is required."),t())}function G(n,r){n&1&&(o(0,"span"),d(1,"Phone number must be 10 digits long."),t())}function H(n,r){if(n&1&&(o(0,"div",11),c(1,B,2,0,"span",12)(2,G,2,0,"span",12),t()),n&2){h();let e=m(6);a(),l("ngIf",e.errors==null?null:e.errors.required),a(),l("ngIf",e.errors==null?null:e.errors.pattern)}}function J(n,r){n&1&&(o(0,"span"),d(1,"Password is required."),t())}function K(n,r){n&1&&(o(0,"span"),d(1,"Password must be at least 6 characters long."),t())}function Q(n,r){if(n&1&&(o(0,"div",11),c(1,J,2,0,"span",12)(2,K,2,0,"span",12),t()),n&2){h();let e=m(12);a(),l("ngIf",e.errors==null?null:e.errors.required),a(),l("ngIf",e.errors==null?null:e.errors.minlength)}}var j=class n{constructor(r,e,s){this.authService=r;this.route=e;this.router=s}PhoneNumber="";Password="";Role="";ngOnInit(){this.Role=this.route.snapshot.paramMap.get("option")}onLogin(){console.log(this.PhoneNumber,this.Password,this.Role);let r={PhoneNumber:this.PhoneNumber,Password:this.Password,Role:this.Role};this.authService.login(r).pipe(C({next:e=>{console.log("Login successful",e),localStorage.setItem("token",e.token),this.Role==="EventOrganizer"?this.router.navigate(["/event-organiser/dashboard"]):this.Role==="Customer"&&this.router.navigate(["/events"])},error:e=>{console.error("Login failed",e)}})).subscribe()}static \u0275fac=function(e){return new(e||n)(b(D),b(L),b(N))};static \u0275cmp=P({type:n,selectors:[["app-ulogin"]],standalone:!0,features:[S],decls:16,vars:5,consts:[["registerForm","ngForm"],["phoneInput","ngModel"],["passwordInput","ngModel"],[1,"login-form",3,"ngSubmit"],[1,"form-group"],["for","phoneNumber"],["id","phoneNumber","type","tel","name","phoneNumber","required","","pattern","^[0-9]{10}$",1,"form-control",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","password"],["id","password","type","password","name","password","required","","minlength","6",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"],[4,"ngIf"]],template:function(e,s){if(e&1){let p=M();o(0,"form",3,0),x("ngSubmit",function(){return g(p),f(s.onLogin())}),o(2,"div",4)(3,"label",5),d(4,"Phone Number"),t(),o(5,"input",6,1),w("ngModelChange",function(i){return g(p),v(s.PhoneNumber,i)||(s.PhoneNumber=i),f(i)}),t(),c(7,H,3,2,"div",7),t(),o(8,"div",4)(9,"label",8),d(10,"Password"),t(),o(11,"input",9,2),w("ngModelChange",function(i){return g(p),v(s.Password,i)||(s.Password=i),f(i)}),t(),c(13,Q,3,2,"div",7),t(),o(14,"button",10),d(15," Login "),t()()}if(e&2){let p=m(1),u=m(6),i=m(12);a(5),_("ngModel",s.PhoneNumber),a(2),l("ngIf",u.invalid&&u.touched),a(4),_("ngModel",s.Password),a(2),l("ngIf",i.invalid&&i.touched),a(),l("disabled",p.invalid)}},dependencies:[z,q,E,O,V,A,F,W,k,T,I,y,R],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;padding:1.5rem;border:1px solid #ccc;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:.5rem}input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{border-color:#f5e3c0;outline:none;box-shadow:0 0 4px #007bff40}.error-message[_ngcontent-%COMP%]{color:#ff4d4d;font-size:.85rem;margin-top:.25rem}.btn[_ngcontent-%COMP%]{display:block;width:100%;padding:.75rem;background-color:#2b2b2b;color:#f5e3c0;border:none;border-radius:4px;font-size:1rem;cursor:pointer;margin-top:1rem}.btn[_ngcontent-%COMP%]:hover{background-color:#f5e3c0;color:#2b2b2b}.btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})};export{j as LoginComponent};
